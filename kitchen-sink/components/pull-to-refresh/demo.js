webpackJsonp([18],{424:function(n,s,a){n.exports={"basic-listview":a(904),basic:a(908)}},480:function(n,s,a){"use strict";s.__esModule=!0,s.default=function(n,s){var a={};for(var t in n)s.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t]);return a}},643:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var t=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t])}return n},e=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),o=u(a(0)),p=u(a(676)),c=u(a(679)),i=u(a(734));function u(n){return n&&n.__esModule?n:{default:n}}var l=function(n){function s(){!function(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s);var n=function(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments));return n.scrollTo=function(){var s;return(s=n.listviewRef).scrollTo.apply(s,arguments)},n.getInnerViewNode=function(){return n.listviewRef.getInnerViewNode()},n}return function(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}(s,o.default.Component),e(s,[{key:"render",value:function(){var n=this,s=(0,c.default)(this.props,!1),a=s.restProps,e=s.extraProps;return o.default.createElement(p.default,t({ref:function(s){return n.listviewRef=s}},a,e))}}]),s}();s.default=l,l.defaultProps={prefixCls:"am-list-view",listPrefixCls:"am-list"},l.DataSource=p.default.DataSource,l.IndexedList=i.default,n.exports=s.default},644:function(n,s,a){"use strict";a(29),a(128),a(735)},676:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),a.d(s,"DataSource",function(){return o});var t=a(677),e=a(733);a.d(s,"IndexedList",function(){return e.a}),t.a.IndexedList=e.a;var o=t.a.DataSource;s.default=t.a},677:function(n,s,a){"use strict";var t=a(2),e=a.n(t),o=a(480),p=a.n(o),c=a(4),i=a.n(c),u=a(8),l=a.n(u),r=a(5),k=a.n(r),d=a(6),h=a.n(d),f=a(0),g=a(1),m=a.n(g),y=(a(0),a(730)),v=a(732),w=function(n){function s(){return i()(this,s),k()(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return h()(s,n),l()(s,[{key:"shouldComponentUpdate",value:function(n){return n.shouldUpdate}},{key:"render",value:function(){return this.props.render()}}]),s}(f.default.Component),S=function(n){function s(){var n,a,t,e;i()(this,s);for(var o=arguments.length,p=Array(o),c=0;c<o;c++)p[c]=arguments[c];return a=t=k()(this,(n=s.__proto__||Object.getPrototypeOf(s)).call.apply(n,[this].concat(p))),b.call(t),e=a,k()(t,e)}return h()(s,n),l()(s,[{key:"componentWillMount",value:function(){this.scrollProperties={visibleLength:null,contentLength:null,offset:0},this._childFrames=[],this._visibleRows={},this._prevRenderedRowsCount=0,this._sentEndForContentLength=null}},{key:"componentWillReceiveProps",value:function(n){var s=this;this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||this.setState(function(a,t){return s._prevRenderedRowsCount=0,{curRenderedRowsCount:Math.min(Math.max(a.curRenderedRowsCount,n.initialListSize),n.dataSource.getRowCount())}},function(){return s._renderMoreRowsIfNeeded()})}},{key:"render",value:function(){for(var n=this,s=this.props.dataSource,a=s.rowIdentities,t=[],o=0,c=0;c<a.length;c++){var i=s.sectionIdentities[c],u=a[c];if(0!==u.length){var l=void 0;if(this.props.renderSectionHeader){var r=o>=this._prevRenderedRowsCount&&s.sectionHeaderShouldUpdate(c);l=f.default.createElement(w,{key:"s_"+i,shouldUpdate:!!r,render:this.props.renderSectionHeader.bind(null,s.getSectionHeaderData(c),i)})}for(var k=[],d=0;d<u.length;d++){var h=u[d],g=i+"_"+h,m=o>=this._prevRenderedRowsCount&&s.rowShouldUpdate(c,d),y=f.default.createElement(w,{key:"r_"+g,shouldUpdate:!!m,render:this.props.renderRow.bind(null,s.getRowData(c,d),i,h,this.onRowHighlighted)});if(k.push(y),this.props.renderSeparator&&(d!==u.length-1||c===a.length-1)){var v=this.state.highlightedRow.sectionID===i&&(this.state.highlightedRow.rowID===h||this.state.highlightedRow.rowID===u[d+1]),S=this.props.renderSeparator(i,h,v);S&&k.push(S)}if(++o===this.state.curRenderedRowsCount)break}var b=f.default.cloneElement(this.props.renderSectionBodyWrapper(i),{className:this.props.sectionBodyClassName},k);if(this.props.renderSectionWrapper?t.push(f.default.cloneElement(this.props.renderSectionWrapper(i),{},l,b)):(t.push(l),t.push(b)),o>=this.state.curRenderedRowsCount)break}}var _=this.props,R=_.renderScrollComponent,C=p()(_,["renderScrollComponent"]);return f.default.cloneElement(R(e()({},C,{onScroll:this._onScroll})),{ref:function(s){return n.ListViewRef=s},onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout},this.props.renderHeader?this.props.renderHeader():null,f.default.cloneElement(C.renderBodyComponent(),{},t),this.props.renderFooter?this.props.renderFooter():null,C.children)}}]),s}(f.default.Component);S.DataSource=y.a,S.propTypes=e()({},v.a.propTypes,{dataSource:m.a.instanceOf(y.a).isRequired,renderSeparator:m.a.func,renderRow:m.a.func.isRequired,initialListSize:m.a.number,onEndReached:m.a.func,onEndReachedThreshold:m.a.number,pageSize:m.a.number,renderFooter:m.a.func,renderHeader:m.a.func,renderSectionHeader:m.a.func,renderScrollComponent:m.a.func,scrollRenderAheadDistance:m.a.number,onChangeVisibleRows:m.a.func,scrollEventThrottle:m.a.number,renderBodyComponent:m.a.func,renderSectionWrapper:m.a.func,renderSectionBodyWrapper:m.a.func,sectionBodyClassName:m.a.string,listViewPrefixCls:m.a.string,useBodyScroll:m.a.bool}),S.defaultProps={initialListSize:10,pageSize:1,renderScrollComponent:function(n){return f.default.createElement(v.a,n)},renderBodyComponent:function(){return f.default.createElement("div",null)},renderSectionBodyWrapper:function(n){return f.default.createElement("div",{key:n})},sectionBodyClassName:"list-view-section-body",listViewPrefixCls:"rmc-list-view",scrollRenderAheadDistance:1e3,onEndReachedThreshold:1e3,scrollEventThrottle:50,scrollerOptions:{}};var b=function(){var n=this;this.state={curRenderedRowsCount:this.props.initialListSize,highlightedRow:{}},this.getMetrics=function(){return{contentLength:n.scrollProperties.contentLength,totalRows:n.props.dataSource.getRowCount(),renderedRows:n.state.curRenderedRowsCount,visibleRows:Object.keys(n._visibleRows).length}},this.getInnerViewNode=function(){return n.ListViewRef.getInnerViewNode()},this.scrollTo=function(){var s;n.ListViewRef&&n.ListViewRef.scrollTo&&(s=n.ListViewRef).scrollTo.apply(s,arguments)},this.onRowHighlighted=function(s,a){n.setState({highlightedRow:{sectionID:s,rowID:a}})},this._onContentSizeChange=function(s,a){var t=n.props.horizontal?s:a;t!==n.scrollProperties.contentLength&&(n.scrollProperties.contentLength=t,n._renderMoreRowsIfNeeded()),n.props.onContentSizeChange&&n.props.onContentSizeChange(s,a)},this._onLayout=function(s){var a=s.nativeEvent.layout,t=a.width,e=a.height,o=n.props.horizontal?t:e;o!==n.scrollProperties.visibleLength&&(n.scrollProperties.visibleLength=o,n._renderMoreRowsIfNeeded()),n.props.onLayout&&n.props.onLayout(s)},this._maybeCallOnEndReached=function(s){return!!(n.props.onEndReached&&n.scrollProperties.contentLength!==n._sentEndForContentLength&&n._getDistanceFromEnd(n.scrollProperties)<n.props.onEndReachedThreshold&&n.state.curRenderedRowsCount===n.props.dataSource.getRowCount())&&(n._sentEndForContentLength=n.scrollProperties.contentLength,n.props.onEndReached(s),!0)},this._renderMoreRowsIfNeeded=function(){null!==n.scrollProperties.contentLength&&null!==n.scrollProperties.visibleLength&&n.state.curRenderedRowsCount!==n.props.dataSource.getRowCount()?n._getDistanceFromEnd(n.scrollProperties)<n.props.scrollRenderAheadDistance&&n._pageInNewRows():n._maybeCallOnEndReached()},this._pageInNewRows=function(){n.setState(function(s,a){var t=Math.min(s.curRenderedRowsCount+a.pageSize,a.dataSource.getRowCount());return n._prevRenderedRowsCount=s.curRenderedRowsCount,{curRenderedRowsCount:t}},function(){n._prevRenderedRowsCount=n.state.curRenderedRowsCount})},this._getDistanceFromEnd=function(n){return n.contentLength-n.visibleLength-n.offset},this._onScroll=function(s,a){n.ListViewRef&&(n.scrollProperties=a,n._maybeCallOnEndReached(s)||n._renderMoreRowsIfNeeded(),n.props.onEndReached&&n._getDistanceFromEnd(n.scrollProperties)>n.props.onEndReachedThreshold&&(n._sentEndForContentLength=null),n.props.onScroll&&n.props.onScroll(s))}};s.a=S},678:function(n,s,a){"use strict";s.b=function(n){var s=0;do{isNaN(n.offsetTop)||(s+=n.offsetTop)}while(n=n.offsetParent);return s},s.a=function(n){if(n.touches&&n.touches.length)return n.touches[0];if(n.changedTouches&&n.changedTouches.length)return n.changedTouches[0];return n},s.c=function(n,s){var a=!0,t=!0;return function(e){a&&(a=!1,setTimeout(function(){a=!0,n(e)},s),t&&(n(e),t=!1))}}},679:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(n,s){var a=n.renderHeader,e=n.renderFooter,o=n.renderSectionHeader,i=n.renderBodyComponent,u=p(n,["renderHeader","renderFooter","renderSectionHeader","renderBodyComponent"]),l=n.listPrefixCls,r={renderHeader:null,renderFooter:null,renderSectionHeader:null,renderBodyComponent:i||function(){return t.default.createElement("div",{className:l+"-body"})}};a&&(r.renderHeader=function(){return t.default.createElement("div",{className:l+"-header"},a())});e&&(r.renderFooter=function(){return t.default.createElement("div",{className:l+"-footer"},e())});o&&(r.renderSectionHeader=s?function(n,s){return t.default.createElement("div",null,t.default.createElement(c,{prefixCls:l},o(n,s)))}:function(n,s){return t.default.createElement(c,{prefixCls:l},o(n,s))});return{restProps:u,extraProps:r}};var t=o(a(0)),e=o(a(129));function o(n){return n&&n.__esModule?n:{default:n}}var p=function(n,s){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&s.indexOf(t)<0&&(a[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(t=Object.getOwnPropertySymbols(n);e<t.length;e++)s.indexOf(t[e])<0&&(a[t[e]]=n[t[e]])}return a},c=e.default.Item;n.exports=s.default},730:function(n,s,a){"use strict";var t=a(4),e=a.n(t),o=a(8),p=a.n(o),c=a(141),i=a.n(c),u=a(731),l=a.n(u),r=a(10),k=a.n(r);function d(n,s,a){return n[s][a]}function h(n,s){return n[s]}var f=function(){function n(s){e()(this,n),i()(s&&"function"==typeof s.rowHasChanged,"Must provide a rowHasChanged function."),this._rowHasChanged=s.rowHasChanged,this._getRowData=s.getRowData||d,this._sectionHeaderHasChanged=s.sectionHeaderHasChanged,this._getSectionHeaderData=s.getSectionHeaderData||h,this._dataBlob=null,this._dirtyRows=[],this._dirtySections=[],this._cachedRowCount=0,this.rowIdentities=[],this.sectionIdentities=[]}return p()(n,[{key:"cloneWithRows",value:function(n,s){var a=s?[s]:null;return this._sectionHeaderHasChanged||(this._sectionHeaderHasChanged=function(){return!1}),this.cloneWithRowsAndSections({s1:n},["s1"],a)}},{key:"cloneWithRowsAndSections",value:function(s,a,t){i()("function"==typeof this._sectionHeaderHasChanged,"Must provide a sectionHeaderHasChanged function with section data."),i()(!a||!t||a.length===t.length,"row and section ids lengths must be the same");var e=new n({getRowData:this._getRowData,getSectionHeaderData:this._getSectionHeaderData,rowHasChanged:this._rowHasChanged,sectionHeaderHasChanged:this._sectionHeaderHasChanged});return e._dataBlob=s,e.sectionIdentities=a||Object.keys(s),t?e.rowIdentities=t:(e.rowIdentities=[],e.sectionIdentities.forEach(function(n){e.rowIdentities.push(Object.keys(s[n]))})),e._cachedRowCount=function(n){for(var s=0,a=0;a<n.length;a++){var t=n[a];s+=t.length}return s}(e.rowIdentities),e._calculateDirtyArrays(this._dataBlob,this.sectionIdentities,this.rowIdentities),e}},{key:"getRowCount",value:function(){return this._cachedRowCount}},{key:"getRowAndSectionCount",value:function(){return this._cachedRowCount+this.sectionIdentities.length}},{key:"rowShouldUpdate",value:function(n,s){var a=this._dirtyRows[n][s];return k()(void 0!==a,"missing dirtyBit for section, row: "+n+", "+s),a}},{key:"getRowData",value:function(n,s){var a=this.sectionIdentities[n],t=this.rowIdentities[n][s];return k()(void 0!==a&&void 0!==t,"rendering invalid section, row: "+n+", "+s),this._getRowData(this._dataBlob,a,t)}},{key:"getRowIDForFlatIndex",value:function(n){for(var s=n,a=0;a<this.sectionIdentities.length;a++){if(!(s>=this.rowIdentities[a].length))return this.rowIdentities[a][s];s-=this.rowIdentities[a].length}return null}},{key:"getSectionIDForFlatIndex",value:function(n){for(var s=n,a=0;a<this.sectionIdentities.length;a++){if(!(s>=this.rowIdentities[a].length))return this.sectionIdentities[a];s-=this.rowIdentities[a].length}return null}},{key:"getSectionLengths",value:function(){for(var n=[],s=0;s<this.sectionIdentities.length;s++)n.push(this.rowIdentities[s].length);return n}},{key:"sectionHeaderShouldUpdate",value:function(n){var s=this._dirtySections[n];return k()(void 0!==s,"missing dirtyBit for section: "+n),s}},{key:"getSectionHeaderData",value:function(n){if(!this._getSectionHeaderData)return null;var s=this.sectionIdentities[n];return k()(void 0!==s,"renderSection called on invalid section: "+n),this._getSectionHeaderData(this._dataBlob,s)}},{key:"_calculateDirtyArrays",value:function(n,s,a){for(var t,e=g(s),o={},p=0;p<a.length;p++){var c=s[p];k()(!o[c],"SectionID appears more than once: "+c),o[c]=g(a[p])}this._dirtySections=[],this._dirtyRows=[];for(var i=0;i<this.sectionIdentities.length;i++){t=!e[c=this.sectionIdentities[i]];var u=this._sectionHeaderHasChanged;!t&&u&&(t=u(this._getSectionHeaderData(n,c),this._getSectionHeaderData(this._dataBlob,c))),this._dirtySections.push(!!t),this._dirtyRows[i]=[];for(var l=0;l<this.rowIdentities[i].length;l++){var r=this.rowIdentities[i][l];t=!e[c]||!o[c][r]||this._rowHasChanged(this._getRowData(n,c,r),this._getRowData(this._dataBlob,c,r)),this._dirtyRows[i].push(!!t)}}}}]),n}();function g(n){if(l()(n))return{};for(var s={},a=0;a<n.length;a++){var t=n[a];k()(!s[t],"Value appears more than once in array: "+t),s[t]=!0}return s}s.a=f},731:function(n,s,a){"use strict";var t=a(141);n.exports=function(n){if(Array.isArray(n))return 0===n.length;if("object"==typeof n){if(n)for(var s in!function(n){return"undefined"!=typeof Symbol&&n[Symbol.iterator]}(n)||void 0===n.size||t(!1),n)return!1;return!0}return!n}},732:function(n,s,a){"use strict";var t=a(2),e=a.n(t),o=a(4),p=a.n(o),c=a(8),i=a.n(c),u=a(5),l=a.n(u),r=a(6),k=a.n(r),d=a(0),h=a(1),f=a.n(h),g=a(3),m=a.n(g),y=a(678),v={className:f.a.string,prefixCls:f.a.string,listPrefixCls:f.a.string,listViewPrefixCls:f.a.string,style:f.a.object,contentContainerStyle:f.a.object,onScroll:f.a.func},w=function(n){function s(){var n,a,t,e;p()(this,s);for(var o=arguments.length,c=Array(o),i=0;i<o;i++)c[i]=arguments[i];return a=t=l()(this,(n=s.__proto__||Object.getPrototypeOf(s)).call.apply(n,[this].concat(c))),S.call(t),e=a,l()(t,e)}return k()(s,n),i()(s,[{key:"componentWillUpdate",value:function(n){this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||!this.handleScroll||(this.props.useBodyScroll?window.removeEventListener("scroll",this.handleScroll):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll))}},{key:"componentDidUpdate",value:function(n){var s=this;this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||!this.handleScroll||setTimeout(function(){s.props.useBodyScroll?window.addEventListener("scroll",s.handleScroll):s.ScrollViewRef.addEventListener("scroll",s.handleScroll)},0)}},{key:"componentDidMount",value:function(){var n=this,s=function(s){return n.props.onScroll&&n.props.onScroll(s,n.getMetrics())};this.props.scrollEventThrottle&&(s=Object(y.c)(s,this.props.scrollEventThrottle)),this.handleScroll=s,this.onLayout=function(){return n.props.onLayout({nativeEvent:{layout:{width:window.innerWidth,height:window.innerHeight}}})},this.props.useBodyScroll?(window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onLayout)):this.ScrollViewRef.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.props.useBodyScroll?(window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.onLayout)):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var n=this,s=this.props,a=s.children,t=s.className,o=s.prefixCls,p=s.listPrefixCls,c=s.listViewPrefixCls,i=s.style,u=void 0===i?{}:i,l=s.contentContainerStyle,r=void 0===l?{}:l,k=s.useBodyScroll,h=s.pullToRefresh,f=o||c||"",g={ref:function(s){return n.ScrollViewRef=s||n.ScrollViewRef},style:e()({},k?{}:{position:"relative",overflow:"auto",WebkitOverflowScrolling:"touch"},u),className:m()(t,f+"-scrollview")},y={ref:function(s){return n.InnerScrollViewRef=s},style:e()({position:"absolute",minWidth:"100%"},r),className:m()(f+"-scrollview-content",p)},v=function(s){return d.default.cloneElement(h,{getScrollContainer:s?function(){return document.body}:function(){return n.ScrollViewRef}},a)};return k?h?d.default.createElement("div",g,v(!0)):d.default.createElement("div",g,a):h?d.default.createElement("div",g,d.default.createElement("div",y,v())):d.default.createElement("div",g,d.default.createElement("div",y,a))}}]),s}(d.default.Component);w.propTypes=v;var S=function(){var n=this;this.getMetrics=function(){var s=!n.props.horizontal;if(n.props.useBodyScroll){var a=document.scrollingElement?document.scrollingElement:document.body;return{visibleLength:window[s?"innerHeight":"innerWidth"],contentLength:n.ScrollViewRef?n.ScrollViewRef[s?"scrollHeight":"scrollWidth"]:0,offset:a[s?"scrollTop":"scrollLeft"]}}return{visibleLength:n.ScrollViewRef[s?"offsetHeight":"offsetWidth"],contentLength:n.ScrollViewRef[s?"scrollHeight":"scrollWidth"],offset:n.ScrollViewRef[s?"scrollTop":"scrollLeft"]}},this.getInnerViewNode=function(){return n.InnerScrollViewRef},this.scrollTo=function(){var s;n.props.useBodyScroll?(s=window).scrollTo.apply(s,arguments):(n.ScrollViewRef.scrollLeft=arguments.length<=0?void 0:arguments[0],n.ScrollViewRef.scrollTop=arguments.length<=1?void 0:arguments[1])}};s.a=w},733:function(n,s,a){"use strict";var t=a(34),e=a.n(t),o=a(2),p=a.n(o),c=a(480),i=a.n(c),u=a(4),l=a.n(u),r=a(8),k=a.n(r),d=a(5),h=a.n(d),f=a(6),g=a.n(f),m=a(0),y=a(1),v=a.n(y),w=a(0),S=a(3),b=a.n(S),_=a(677),R=a(678);function C(n){window.document.body.scrollTop=n,window.document.documentElement.scrollTop=n}var E=function(n){function s(n){l()(this,s);var a=h()(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return x.call(a),a.state={pageSize:n.pageSize,_delay:!1},a}return g()(s,n),k()(s,[{key:"componentDidMount",value:function(){this.dataChange(this.props),this.getQsInfo()}},{key:"componentWillReceiveProps",value:function(n){this.props.dataSource!==n.dataSource&&this.dataChange(n)}},{key:"componentDidUpdate",value:function(){this.getQsInfo()}},{key:"componentWillUnmount",value:function(){this._timer&&clearTimeout(this._timer),this._hCache=null}},{key:"renderQuickSearchBar",value:function(n,s){var a=this,t=this.props,e=t.dataSource,o=t.prefixCls,p=e.sectionIdentities.map(function(n){return{value:n,label:e._getSectionHeaderData(e._dataBlob,n)}});return m.default.createElement("ul",{ref:function(n){return a.quickSearchBarRef=n},className:o+"-quick-search-bar",style:s,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd},m.default.createElement("li",{"data-qf-target":n.value,onClick:function(){return a.onQuickSearchTop(void 0,n.value)}},n.label),p.map(function(n){return m.default.createElement("li",{key:n.value,"data-qf-target":n.value,onClick:function(){return a.onQuickSearch(n.value)}},n.label)}))}},{key:"render",value:function(){var n,s=this,a=this.state,t=a._delay,o=a.pageSize,c=this.props,u=c.className,l=c.prefixCls,r=c.children,k=c.quickSearchBarTop,d=c.quickSearchBarStyle,h=c.initialListSize,f=void 0===h?Math.min(20,this.props.dataSource.getRowCount()):h,g=c.showQuickSearchIndicator,y=c.renderSectionHeader,v=c.sectionHeaderClassName,w=i()(c,["className","prefixCls","children","quickSearchBarTop","quickSearchBarStyle","initialListSize","showQuickSearchIndicator","renderSectionHeader","sectionHeaderClassName"]);return m.default.createElement("div",{className:l+"-container"},t&&this.props.delayActivityIndicator,m.default.createElement(_.a,p()({},w,{ref:function(n){return s.indexedListViewRef=n},className:b()(l,u),initialListSize:f,pageSize:o,renderSectionHeader:function(n,a){return m.default.cloneElement(y(n,a),{ref:function(n){return s.sectionComponents[a]=n},className:v||l+"-section-header"})}}),r),this.renderQuickSearchBar(k,d),g?m.default.createElement("div",{className:b()((n={},e()(n,l+"-qsindicator",!0),e()(n,l+"-qsindicator-hide",!g||!this.state.showQuickSearchIndicator),n)),ref:function(n){return s.qsIndicatorRef=n}}):null)}}]),s}(m.default.Component);E.propTypes=p()({},_.a.propTypes,{children:v.a.any,prefixCls:v.a.string,className:v.a.string,sectionHeaderClassName:v.a.string,quickSearchBarTop:v.a.object,quickSearchBarStyle:v.a.object,onQuickSearch:v.a.func,showQuickSearchIndicator:v.a.bool}),E.defaultProps={prefixCls:"rmc-indexed-list",quickSearchBarTop:{value:"#",label:"#"},onQuickSearch:function(){},showQuickSearchIndicator:!1,delayTime:100,delayActivityIndicator:""};var x=function(){var n=this;this.onQuickSearchTop=function(s,a){n.props.useBodyScroll?C(0):w.default.findDOMNode(n.indexedListViewRef.ListViewRef).scrollTop=0,n.props.onQuickSearch(s,a)},this.onQuickSearch=function(s){var a=w.default.findDOMNode(n.indexedListViewRef.ListViewRef),t=w.default.findDOMNode(n.sectionComponents[s]);n.props.useBodyScroll?C(t.getBoundingClientRect().top-a.getBoundingClientRect().top+Object(R.b)(a)):a.scrollTop+=t.getBoundingClientRect().top-a.getBoundingClientRect().top,n.props.onQuickSearch(s)},this.onTouchStart=function(s){n._target=s.target,n._basePos=n.quickSearchBarRef.getBoundingClientRect(),document.addEventListener("touchmove",n._disableParent,!1),document.body.className=document.body.className+" "+n.props.prefixCls+"-qsb-moving",n.updateIndicator(n._target)},this.onTouchMove=function(s){if(s.preventDefault(),n._target){var a=Object(R.a)(s),t=n._basePos,e=void 0;if(a.clientY>=t.top&&a.clientY<=t.top+n._qsHeight){var o=void 0;if((e=Math.floor((a.clientY-t.top)/n._avgH))in n._hCache&&(o=n._hCache[e][0]),o){var p=o.getAttribute("data-qf-target");n._target!==o&&(n.props.quickSearchBarTop.value===p?n.onQuickSearchTop(void 0,p):n.onQuickSearch(p),n.updateIndicator(o)),n._target=o}}}},this.onTouchEnd=function(){n._target&&(document.removeEventListener("touchmove",n._disableParent,!1),document.body.className=document.body.className.replace(new RegExp("\\s*"+n.props.prefixCls+"-qsb-moving","g"),""),n.updateIndicator(n._target,!0),n._target=null)},this.getQsInfo=function(){var s=n.quickSearchBarRef,a=s.offsetHeight,t=[];[].slice.call(s.querySelectorAll("[data-qf-target]")).forEach(function(n){t.push([n])});for(var e=a/t.length,o=0,p=0,c=t.length;p<c;p++)o=p*e,t[p][1]=[o,o+e];n._qsHeight=a,n._avgH=e,n._hCache=t},this.sectionComponents={},this.dataChange=function(s){var a=s.dataSource.getRowCount();a&&(n.setState({_delay:!0}),n._timer&&clearTimeout(n._timer),n._timer=setTimeout(function(){n.setState({pageSize:a,_delay:!1},function(){return n.indexedListViewRef._pageInNewRows()})},s.delayTime))},this.updateIndicator=function(s,a){var t=s;t.getAttribute("data-qf-target")||(t=t.parentNode),n.props.showQuickSearchIndicator&&(n.qsIndicatorRef.innerText=t.innerText.trim(),n.setState({showQuickSearchIndicator:!0}),n._indicatorTimer&&clearTimeout(n._indicatorTimer),n._indicatorTimer=setTimeout(function(){n.setState({showQuickSearchIndicator:!1})},1e3));var e=n.props.prefixCls+"-quick-search-bar-over";n._hCache.forEach(function(n){n[0].className=n[0].className.replace(e,"")}),a||(t.className=t.className+" "+e)},this._disableParent=function(n){n.preventDefault(),n.stopPropagation()}};s.a=E},734:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var t=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t])}return n},e=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),o=i(a(0)),p=i(a(676)),c=i(a(679));function i(n){return n&&n.__esModule?n:{default:n}}var u=p.default.IndexedList,l=function(n){function s(){return function(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s),function(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return function(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}(s,o.default.Component),e(s,[{key:"render",value:function(){var n=this,s=this.props,a=s.prefixCls,e=s.listPrefixCls,p=(0,c.default)(this.props,!0),i=p.restProps,l=p.extraProps;return o.default.createElement(u,t({ref:function(s){return n.indexedListRef=s},sectionHeaderClassName:a+"-section-header "+e+"-body",sectionBodyClassName:a+"-section-body "+e+"-body"},i,l),this.props.children)}}]),s}();s.default=l,l.defaultProps={prefixCls:"am-indexed-list",listPrefixCls:"am-list",listViewPrefixCls:"am-list-view"},n.exports=s.default},735:function(n,s){},771:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var t=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t])}return n},e=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}(),o=i(a(0)),p=i(a(905)),c=i(a(44));function i(n){return n&&n.__esModule?n:{default:n}}var u=function(n){function s(){return function(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s),function(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return function(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}(s,o.default.Component),e(s,[{key:"render",value:function(){var n=t({activate:"\u677e\u5f00\u7acb\u5373\u5237\u65b0",deactivate:"\u4e0b\u62c9\u53ef\u4ee5\u5237\u65b0",release:o.default.createElement(c.default,{type:"loading"}),finish:"\u5b8c\u6210\u5237\u65b0"},this.props.indicator);return o.default.createElement(p.default,t({},this.props,{indicator:n}))}}]),s}();s.default=u,u.defaultProps={prefixCls:"am-pull-to-refresh"},n.exports=s.default},772:function(n,s,a){"use strict";a(29),a(45),a(907)},904:function(n,s,a){n.exports={content:[],meta:{order:1,title:{"zh-CN":"ListView \u4e0b\u62c9\u5237\u65b0","en-US":"ListView PullToRefresh"},filename:"components/pull-to-refresh/demo/basic-listview.md",id:"components-pull-to-refresh-demo-basic-listview"},highlightedCode:["pre",{lang:"jsx",highlighted:'<span class="token comment" spellcheck="true">/* eslint no-dupe-keys: 0, no-mixed-operators: 0 */</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> PullToRefresh<span class="token punctuation">,</span> ListView<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd-mobile\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'Meet hotel\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'McDonald\\\'s invites you\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'Eat the week\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> NUM_ROWS <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> pageIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">genData</span><span class="token punctuation">(</span>pIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dataArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ROWS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dataArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`row - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>pIndex <span class="token operator">*</span> NUM_ROWS<span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dataArr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListView<span class="token punctuation">.</span>DataSource</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      rowHasChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>row1<span class="token punctuation">,</span> row2<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> row1 <span class="token operator">!==</span> row2<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      dataSource<span class="token punctuation">,</span>\n      refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>\n      useBodyScroll<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment" spellcheck="true">// If you use redux, the data maybe at props, you need use `componentWillReceiveProps`</span>\n  <span class="token comment" spellcheck="true">// componentWillReceiveProps(nextProps) {</span>\n  <span class="token comment" spellcheck="true">//   if (nextProps.dataSource !== this.props.dataSource) {</span>\n  <span class="token comment" spellcheck="true">//     this.setState({</span>\n  <span class="token comment" spellcheck="true">//       dataSource: this.state.dataSource.cloneWithRows(nextProps.dataSource),</span>\n  <span class="token comment" spellcheck="true">//     });</span>\n  <span class="token comment" spellcheck="true">//   }</span>\n  <span class="token comment" spellcheck="true">// }</span>\n\n  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">\'auto\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">\'hidden\'</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> hei <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height <span class="token operator">-</span> ReactDOM<span class="token punctuation">.</span><span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lv<span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>\n\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        height<span class="token punctuation">:</span> hei<span class="token punctuation">,</span>\n        refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  onRefresh <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment" spellcheck="true">// simulate initial Ajax</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  onEndReached <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token comment" spellcheck="true">// load new data</span>\n    <span class="token comment" spellcheck="true">// hasMore: from backend data, indicates whether it is the last page, here is false</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasMore<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'reach end\'</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">genData</span><span class="token punctuation">(</span><span class="token operator">++</span>pageIndex<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> separator <span class="token operator">=</span> <span class="token punctuation">(</span>sectionID<span class="token punctuation">,</span> rowID<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sectionID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rowID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n          backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#F5F5F9\'</span><span class="token punctuation">,</span>\n          height<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>\n          borderTop<span class="token punctuation">:</span> <span class="token string">\'1px solid #ECECED\'</span><span class="token punctuation">,</span>\n          borderBottom<span class="token punctuation">:</span> <span class="token string">\'1px solid #ECECED\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">/></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> index <span class="token operator">=</span> data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> row <span class="token operator">=</span> <span class="token punctuation">(</span>rowData<span class="token punctuation">,</span> sectionID<span class="token punctuation">,</span> rowID<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        index <span class="token operator">=</span> data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">const</span> obj <span class="token operator">=</span> data<span class="token punctuation">[</span>index<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>rowID<span class="token punctuation">}</span></span>\n          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n            padding<span class="token punctuation">:</span> <span class="token string">\'0 15px\'</span><span class="token punctuation">,</span>\n            backgroundColor<span class="token punctuation">:</span> <span class="token string">\'white\'</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token string">\'50px\'</span><span class="token punctuation">,</span> lineHeight<span class="token punctuation">:</span> <span class="token string">\'50px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#888\'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'18px\'</span><span class="token punctuation">,</span> borderBottom<span class="token punctuation">:</span> <span class="token string">\'1px solid #ddd\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token punctuation">{</span>obj<span class="token punctuation">.</span>title<span class="token punctuation">}</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">\'-webkit-box\'</span><span class="token punctuation">,</span> display<span class="token punctuation">:</span> <span class="token string">\'flex\'</span><span class="token punctuation">,</span> padding<span class="token punctuation">:</span> <span class="token string">\'15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token string">\'63px\'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">\'63px\'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">\'15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>obj<span class="token punctuation">.</span>img<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">\'inline-block\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token punctuation">:</span> <span class="token string">\'8px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#000\'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'16px\'</span><span class="token punctuation">,</span> overflow<span class="token punctuation">:</span> <span class="token string">\'hidden\'</span><span class="token punctuation">,</span> textOverflow<span class="token punctuation">:</span> <span class="token string">\'ellipsis\'</span><span class="token punctuation">,</span> whiteSpace<span class="token punctuation">:</span> <span class="token string">\'nowrap\'</span><span class="token punctuation">,</span> maxWidth<span class="token punctuation">:</span> <span class="token string">\'250px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>obj<span class="token punctuation">.</span>des<span class="token punctuation">}</span><span class="token operator">-</span><span class="token punctuation">{</span>rowData<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'16px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'30px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#FF6E27\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>rowID<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> \u5143<span class="token operator">/</span>\u4efb\u52a1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> margin<span class="token punctuation">:</span> <span class="token string">\'30px 15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">inline</span>\n        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> useBodyScroll<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">></span></span>\n        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token operator">?</span> <span class="token string">\'useBodyScroll\'</span> <span class="token punctuation">:</span> <span class="token string">\'partial scroll\'</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>\n        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token operator">?</span> <span class="token string">\'0\'</span> <span class="token punctuation">:</span> <span class="token string">\'1\'</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>el <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>lv <span class="token operator">=</span> el<span class="token punctuation">}</span></span>\n        <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">}</span></span>\n        <span class="token attr-name">renderHeader</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>Pull to refresh<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">renderFooter</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div style<span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> padding<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> textAlign<span class="token punctuation">:</span> <span class="token string">\'center\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoading <span class="token operator">?</span> <span class="token string">\'Loading...\'</span> <span class="token punctuation">:</span> <span class="token string">\'Loaded\'</span><span class="token punctuation">}</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n        renderRow<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">}</span>\n        renderSeparator<span class="token operator">=</span><span class="token punctuation">{</span>separator<span class="token punctuation">}</span>\n        useBodyScroll<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll<span class="token punctuation">}</span>\n        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>useBodyScroll <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>\n          height<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n          border<span class="token punctuation">:</span> <span class="token string">\'1px solid #ddd\'</span><span class="token punctuation">,</span>\n          margin<span class="token punctuation">:</span> <span class="token string">\'5px 0\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span>\n        pullToRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PullToRefresh</span>\n          <span class="token attr-name">refreshing</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>refreshing<span class="token punctuation">}</span></span>\n          <span class="token attr-name">onRefresh</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onRefresh<span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span><span class="token punctuation">}</span>\n        onEndReached<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onEndReached<span class="token punctuation">}</span>\n        pageSize<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span>\n      <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>'}],preview:function(){var n=a(0),s=a(0),t=c(a(771)),e=c(a(134)),o=c(a(643)),p=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}();function c(n){return n&&n.__esModule?n:{default:n}}function i(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function u(n){if(Array.isArray(n)){for(var s=0,a=Array(n.length);s<n.length;s++)a[s]=n[s];return a}return Array.from(n)}a(772),a(135),a(644);var l=[{img:"https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png",title:"Meet hotel",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"},{img:"https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png",title:"McDonald's invites you",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"},{img:"https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png",title:"Eat the week",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"}],r=20,k=0;function d(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=[],a=0;a<r;a++)s.push("row - "+(n*r+a));return s}var h=function(a){function c(n){!function(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}(this,c);var s=function(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,n));s.onRefresh=function(){s.setState({refreshing:!0,isLoading:!0}),setTimeout(function(){s.rData=d(),s.setState({dataSource:s.state.dataSource.cloneWithRows(s.rData),refreshing:!1,isLoading:!1})},600)},s.onEndReached=function(n){s.state.isLoading&&!s.state.hasMore||(console.log("reach end",n),s.setState({isLoading:!0}),setTimeout(function(){s.rData=[].concat(u(s.rData),u(d(++k))),s.setState({dataSource:s.state.dataSource.cloneWithRows(s.rData),isLoading:!1})},1e3))};var a=new o.default.DataSource({rowHasChanged:function(n,s){return n!==s}});return s.state={dataSource:a,refreshing:!0,isLoading:!0,height:document.documentElement.clientHeight,useBodyScroll:!1},s}return function(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}(c,n.Component),p(c,[{key:"componentDidUpdate",value:function(){this.state.useBodyScroll?document.body.style.overflow="auto":document.body.style.overflow="hidden"}},{key:"componentDidMount",value:function(){var n=this,a=this.state.height-s.findDOMNode(this.lv).offsetTop;setTimeout(function(){n.rData=d(),n.setState({dataSource:n.state.dataSource.cloneWithRows(d()),height:a,refreshing:!1,isLoading:!1})},1500)}},{key:"render",value:function(){var s=this,a=l.length-1;return n.createElement("div",null,n.createElement(e.default,{style:{margin:"30px 15px"},inline:!0,onClick:function(){return s.setState({useBodyScroll:!s.state.useBodyScroll})}},this.state.useBodyScroll?"useBodyScroll":"partial scroll"),n.createElement(o.default,{key:this.state.useBodyScroll?"0":"1",ref:function(n){return s.lv=n},dataSource:this.state.dataSource,renderHeader:function(){return n.createElement("span",null,"Pull to refresh")},renderFooter:function(){return n.createElement("div",{style:{padding:30,textAlign:"center"}},s.state.isLoading?"Loading...":"Loaded")},renderRow:function(s,t,e){var o;a<0&&(a=l.length-1);var p=l[a--];return n.createElement("div",{key:e,style:{padding:"0 15px",backgroundColor:"white"}},n.createElement("div",{style:{height:"50px",lineHeight:"50px",color:"#888",fontSize:"18px",borderBottom:"1px solid #ddd"}},p.title),n.createElement("div",{style:(o={display:"-webkit-box"},i(o,"display","flex"),i(o,"padding","15px"),o)},n.createElement("img",{style:{height:"63px",width:"63px",marginRight:"15px"},src:p.img,alt:""}),n.createElement("div",{style:{display:"inline-block"}},n.createElement("div",{style:{marginBottom:"8px",color:"#000",fontSize:"16px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"250px"}},p.des,"-",s),n.createElement("div",{style:{fontSize:"16px"}},n.createElement("span",{style:{fontSize:"30px",color:"#FF6E27"}},e)," \u5143/\u4efb\u52a1"))))},renderSeparator:function(s,a){return n.createElement("div",{key:s+"-"+a,style:{backgroundColor:"#F5F5F9",height:8,borderTop:"1px solid #ECECED",borderBottom:"1px solid #ECECED"}})},useBodyScroll:this.state.useBodyScroll,style:this.state.useBodyScroll?{}:{height:this.state.height,border:"1px solid #ddd",margin:"5px 0"},pullToRefresh:n.createElement(t.default,{refreshing:this.state.refreshing,onRefresh:this.onRefresh}),onEndReached:this.onEndReached,pageSize:5}))}}]),c}();return n.createElement(h,null)}}},905:function(n,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a(906);s.default=t.a},906:function(n,s,a){"use strict";var t=a(2),e=a.n(t),o=a(4),p=a.n(o),c=a(8),i=a.n(c),u=a(5),l=a.n(u),r=a(6),k=a.n(r),d=a(0),h=a(3),f=a.n(h),g=this&&this.__rest||function(n,s){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&s.indexOf(t)<0&&(a[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(t=Object.getOwnPropertySymbols(n);e<t.length;e++)s.indexOf(t[e])<0&&(a[t[e]]=n[t[e]])}return a},m=function(n){function s(){return p()(this,s),l()(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return k()(s,n),i()(s,[{key:"shouldComponentUpdate",value:function(n){return n.shouldUpdate}},{key:"render",value:function(){return d.default.createElement("div",null,this.props.render())}}]),s}(d.default.Component);var y="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),v="down",w="up",S={activate:"release",deactivate:"pull",release:"loading",finish:"finish"},b=!1;try{var _=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",null,_)}catch(n){}var R=!!b&&{passive:!1},C=function(n){function s(){p()(this,s);var n=l()(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments));return n.state={currSt:"",dragOnEdge:!1},n.shouldUpdateChildren=!1,n.triggerPullToRefresh=function(){n.state.dragOnEdge||(n.props.refreshing?(n.props.direction===w&&(n._lastScreenY=-n.props.distanceToRefresh-1),n.props.direction===v&&(n._lastScreenY=n.props.distanceToRefresh+1),n.setState({currSt:"release"},function(){return n.setContentStyle(n._lastScreenY)})):n.setState({currSt:"finish"},function(){return n.reset()}))},n.init=function(s){s&&(n._to={touchstart:n.onTouchStart.bind(n,s),touchmove:n.onTouchMove.bind(n,s),touchend:n.onTouchEnd.bind(n,s),touchcancel:n.onTouchEnd.bind(n,s)},Object.keys(n._to).forEach(function(a){s.addEventListener(a,n._to[a],R)}))},n.destroy=function(s){n._to&&s&&Object.keys(n._to).forEach(function(a){s.removeEventListener(a,n._to[a])})},n.onTouchStart=function(s,a){n._ScreenY=n._startScreenY=a.touches[0].screenY,n._lastScreenY=n._lastScreenY||0},n.isEdge=function(s,a){var t=n.props.getScrollContainer();if(t&&t===document.body){var e=document.scrollingElement?document.scrollingElement:document.body;if(a===w)return e.scrollHeight-e.scrollTop<=window.innerHeight;if(a===v)return e.scrollTop<=0}return a===w?s.scrollHeight-s.scrollTop===s.clientHeight:a===v?s.scrollTop<=0:void 0},n.onTouchMove=function(s,a){var t=a.touches[0].screenY,e=n.props.direction;if(!(e===w&&n._startScreenY<t||e===v&&n._startScreenY>t)&&n.isEdge(s,e)){n.state.dragOnEdge||n.setState({dragOnEdge:!0}),a.preventDefault();var o=Math.round(t-n._ScreenY);n._ScreenY=t,n._lastScreenY+=o,n.setContentStyle(n._lastScreenY),Math.abs(n._lastScreenY)<n.props.distanceToRefresh?"deactivate"!==n.state.currSt&&n.setState({currSt:"deactivate"}):"deactivate"===n.state.currSt&&n.setState({currSt:"activate"}),y&&a.changedTouches[0].clientY<0&&n.onTouchEnd()}},n.onTouchEnd=function(){n.state.dragOnEdge&&n.setState({dragOnEdge:!1}),"activate"===n.state.currSt?(n.setState({currSt:"release"}),n._timer=setTimeout(function(){n.props.refreshing||n.setState({currSt:"finish"},function(){return n.reset()}),n._timer=void 0},1e3),n.props.onRefresh()):n.reset()},n.reset=function(){n._lastScreenY=0,n.setContentStyle(0)},n.setContentStyle=function(s){var a,t;n.contentRef&&(a=n.contentRef.style,t="translate3d(0px,"+s+"px,0)",a.transform=t,a.webkitTransform=t,a.MozTransform=t)},n}return k()(s,n),i()(s,[{key:"shouldComponentUpdate",value:function(n){return this.shouldUpdateChildren=this.props.children!==n.children,!0}},{key:"componentDidUpdate",value:function(n){n!==this.props&&n.refreshing!==this.props.refreshing&&this.triggerPullToRefresh()}},{key:"componentDidMount",value:function(){var n=this;setTimeout(function(){n.init(n.props.getScrollContainer()||n.containerRef),n.triggerPullToRefresh()})}},{key:"componentWillUnmount",value:function(){this.destroy(this.props.getScrollContainer()||this.containerRef)}},{key:"render",value:function(){var n=this,s=this.props,a=s.className,t=s.prefixCls,o=s.children,p=s.getScrollContainer,c=s.direction,i=(s.onRefresh,s.refreshing,s.indicator),u=(s.distanceToRefresh,g(s,["className","prefixCls","children","getScrollContainer","direction","onRefresh","refreshing","indicator","distanceToRefresh"])),l=d.default.createElement(m,{shouldUpdate:this.shouldUpdateChildren,render:function(){return o}}),r=function(s){var a=f()(s,!n.state.dragOnEdge&&t+"-transition");return d.default.createElement("div",{className:t+"-content-wrapper"},d.default.createElement("div",{className:a,ref:function(s){return n.contentRef=s}},c===w?l:null,d.default.createElement("div",{className:t+"-indicator"},i[n.state.currSt]||S[n.state.currSt]),c===v?l:null))};return p()?r(t+"-content "+t+"-"+c):d.default.createElement("div",e()({ref:function(s){return n.containerRef=s},className:f()(a,t,t+"-"+c)},u),r(t+"-content"))}}]),s}(d.default.Component);s.a=C,C.defaultProps={prefixCls:"rmc-pull-to-refresh",getScrollContainer:function(){},direction:v,distanceToRefresh:25,indicator:S}},907:function(n,s){},908:function(n,s,a){n.exports={content:[],meta:{order:0,title:{"zh-CN":"\u62c9\u52a8\u5237\u65b0","en-US":"PullToRefresh"},filename:"components/pull-to-refresh/demo/basic.md",id:"components-pull-to-refresh-demo-basic"},highlightedCode:["pre",{lang:"jsx",highlighted:'<span class="token keyword">import</span> <span class="token punctuation">{</span> PullToRefresh<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd-mobile\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dataArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dataArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dataArr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      down<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>\n      data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> hei <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height <span class="token operator">-</span> ReactDOM<span class="token punctuation">.</span><span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ptr<span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      height<span class="token punctuation">:</span> hei<span class="token punctuation">,</span>\n      data<span class="token punctuation">:</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token punctuation">:</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> down<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">></span></span>\n        direction<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'down\'</span> <span class="token punctuation">:</span> <span class="token string">\'up\'</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PullToRefresh</span>\n        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>el <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>ptr <span class="token operator">=</span> el<span class="token punctuation">}</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n          height<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n          overflow<span class="token punctuation">:</span> <span class="token string">\'auto\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">indicator</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> deactivate<span class="token punctuation">:</span> <span class="token string">\'\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">direction</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'down\'</span> <span class="token punctuation">:</span> <span class="token string">\'up\'</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">refreshing</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>refreshing<span class="token punctuation">}</span></span>\n        <span class="token attr-name">onRefresh</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span></span><span class="token attr-name">,</span> <span class="token attr-name">1000);</span>\n        <span class="token attr-name">}}</span>\n      <span class="token punctuation">></span></span>\n        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token punctuation">:</span> <span class="token string">\'center\'</span><span class="token punctuation">,</span> padding<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'pull down\'</span> <span class="token punctuation">:</span> <span class="token string">\'pull up\'</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>i<span class="token punctuation">}</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PullToRefresh</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Demo</span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>'}],preview:function(){var n=a(0),s=a(0),t=p(a(771)),e=p(a(134)),o=function(){function n(n,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(s,a,t){return a&&n(s.prototype,a),t&&n(s,t),s}}();function p(n){return n&&n.__esModule?n:{default:n}}a(772),a(135);var c=function(a){function p(n){!function(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}(this,p);var s=function(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,n));return s.state={refreshing:!1,down:!0,height:document.documentElement.clientHeight,data:[]},s}return function(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(n,s):n.__proto__=s)}(p,n.Component),o(p,[{key:"componentDidMount",value:function(){var n=this,a=this.state.height-s.findDOMNode(this.ptr).offsetTop;setTimeout(function(){return n.setState({height:a,data:function(){for(var n=[],s=0;s<20;s++)n.push(s);return n}()})},0)}},{key:"render",value:function(){var s=this;return n.createElement("div",null,n.createElement(e.default,{style:{marginBottom:15},onClick:function(){return s.setState({down:!s.state.down})}},"direction: ",this.state.down?"down":"up"),n.createElement(t.default,{ref:function(n){return s.ptr=n},style:{height:this.state.height,overflow:"auto"},indicator:this.state.down?{}:{deactivate:"\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0"},direction:this.state.down?"down":"up",refreshing:this.state.refreshing,onRefresh:function(){s.setState({refreshing:!0}),setTimeout(function(){s.setState({refreshing:!1})},1e3)}},this.state.data.map(function(a){return n.createElement("div",{key:a,style:{textAlign:"center",padding:20}},s.state.down?"pull down":"pull up"," ",a)})))}}]),p}();return n.createElement(c,null)}}}});